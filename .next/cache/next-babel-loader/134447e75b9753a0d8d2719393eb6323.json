{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Link from 'next/link';\n\n// antd components\nimport Button from 'antd/lib/button';\nimport Result from 'antd/lib/result';\nimport dataFetch from '../../utils/dataFetch';\nconst ChangePassword = () => {\n  const {\n    0: isLoading,\n    1: setLoaded\n  } = useState(false);\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: newPassword,\n    1: setNewPassword\n  } = useState('');\n  const {\n    0: verifyPassword,\n    1: setVerifyPassword\n  } = useState('');\n  const {\n    0: error,\n    1: setErrorText\n  } = useState('');\n  const {\n    0: success,\n    1: setSuccessText\n  } = useState('');\n  const query = `\n  mutation ($password: String!, $newPassword: String!){\n  changePassword(password:$password, newPassword:$newPassword){\n    status\n  }\n}\n  `;\n  const submitForm = async variables => dataFetch({\n    query,\n    variables\n  });\n  const changePassword = () => {\n    if (newPassword === verifyPassword) {\n      const variables = {\n        password,\n        newPassword\n      };\n      submitForm(variables).then(r => {\n        if (Object.prototype.hasOwnProperty.call(r, 'errors')) {\n          setErrorText(r.errors[0].message);\n        } else {\n          setSuccessText(r.data.status);\n          setErrorText('');\n        }\n      });\n    } else {\n      setErrorText('Please enter same passwords');\n      setSuccessText('');\n    }\n  };\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"p-4\"\n  }, __jsx(\"h5\", null, \"Change Password\"), !isLoading ? __jsx(\"form\", {\n    className: \"form-group\",\n    onSubmit: e => {\n      setLoaded(true);\n      changePassword();\n      e.preventDefault();\n    }\n  }, __jsx(\"div\", {\n    className: \"page-container\"\n  }, __jsx(\"div\", {\n    className: \"row m-0\"\n  }, __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(\"label\", null, \"Password\"), __jsx(\"div\", {\n    className: \"m-2\"\n  }, __jsx(\"input\", {\n    type: \"password\",\n    placeholder: \"Enter Password\",\n    name: \"password\",\n    className: \"form-control\",\n    onChange: e => setPassword(e.target.value),\n    required: true\n  }))), __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(\"label\", null, \"New Password\"), __jsx(\"div\", {\n    className: \"m-2\"\n  }, __jsx(\"input\", {\n    type: \"password\",\n    placeholder: \"Enter New Password\",\n    name: \"password\",\n    className: \"form-control\",\n    onChange: e => setNewPassword(e.target.value),\n    required: true\n  }))), __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(\"label\", null, \"Confirm Password\"), __jsx(\"div\", {\n    className: \"m-2\"\n  }, __jsx(\"input\", {\n    type: \"password\",\n    placeholder: \"Confirm Password\",\n    name: \"password\",\n    className: \"form-control\",\n    onChange: e => setVerifyPassword(e.target.value),\n    required: true\n  })))), __jsx(\"div\", {\n    className: \"text-right m-3\"\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    className: \"button btn ant-btn-primary\"\n  }, \"Change Password\")))) : __jsx(\"div\", null, success !== '' ? __jsx(Result, {\n    status: \"success\",\n    title: \"Successfully changed your password\",\n    extra: __jsx(Link, {\n      href: \"/\"\n    }, __jsx(Button, {\n      type: \"primary\"\n    }, \"Back Home\"))\n  }) : error !== '' ? __jsx(\"div\", {\n    className: \"alert alert-danger m-4\"\n  }, error) : __jsx(\"div\", {\n    className: \"alert alert-warning m-4\"\n  }, \"Submitting. Please Wait\"))));\n};\nexport default ChangePassword;","map":{"version":3,"names":["React","useState","Link","Button","Result","dataFetch","ChangePassword","isLoading","setLoaded","password","setPassword","newPassword","setNewPassword","verifyPassword","setVerifyPassword","error","setErrorText","success","setSuccessText","query","submitForm","variables","changePassword","then","r","Object","prototype","hasOwnProperty","call","errors","message","data","status","__jsx","Fragment","className","onSubmit","e","preventDefault","type","placeholder","name","onChange","target","value","required","title","extra","href"],"sources":["/home/ash/react projects/amFOSS-webapp/components/account/changePassword.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Link from 'next/link';\n\n// antd components\nimport Button from 'antd/lib/button';\nimport Result from 'antd/lib/result';\n\nimport dataFetch from '../../utils/dataFetch';\n\nconst ChangePassword = () => {\n  const [isLoading, setLoaded] = useState(false);\n  const [password, setPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [verifyPassword, setVerifyPassword] = useState('');\n  const [error, setErrorText] = useState('');\n  const [success, setSuccessText] = useState('');\n\n  const query = `\n  mutation ($password: String!, $newPassword: String!){\n  changePassword(password:$password, newPassword:$newPassword){\n    status\n  }\n}\n  `;\n\n  const submitForm = async (variables) => dataFetch({ query, variables });\n\n  const changePassword = () => {\n    if (newPassword === verifyPassword) {\n      const variables = { password, newPassword };\n      submitForm(variables).then((r) => {\n        if (Object.prototype.hasOwnProperty.call(r, 'errors')) {\n          setErrorText(r.errors[0].message);\n        } else {\n          setSuccessText(r.data.status);\n          setErrorText('');\n        }\n      });\n    } else {\n      setErrorText('Please enter same passwords');\n      setSuccessText('');\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"p-4\">\n        <h5>Change Password</h5>\n        {!isLoading ? (\n          <form\n            className=\"form-group\"\n            onSubmit={(e) => {\n              setLoaded(true);\n              changePassword();\n              e.preventDefault();\n            }}\n          >\n            <div className=\"page-container\">\n              <div className=\"row m-0\">\n                <div className=\"col-md-4\">\n                  <label>Password</label>\n                  <div className=\"m-2\">\n                    <input\n                      type=\"password\"\n                      placeholder=\"Enter Password\"\n                      name=\"password\"\n                      className=\"form-control\"\n                      onChange={(e) => setPassword(e.target.value)}\n                      required\n                    />\n                  </div>\n                </div>\n                <div className=\"col-md-4\">\n                  <label>New Password</label>\n                  <div className=\"m-2\">\n                    <input\n                      type=\"password\"\n                      placeholder=\"Enter New Password\"\n                      name=\"password\"\n                      className=\"form-control\"\n                      onChange={(e) => setNewPassword(e.target.value)}\n                      required\n                    />\n                  </div>\n                </div>\n                <div className=\"col-md-4\">\n                  <label>Confirm Password</label>\n                  <div className=\"m-2\">\n                    <input\n                      type=\"password\"\n                      placeholder=\"Confirm Password\"\n                      name=\"password\"\n                      className=\"form-control\"\n                      onChange={(e) => setVerifyPassword(e.target.value)}\n                      required\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className=\"text-right m-3\">\n                <button type=\"submit\" className=\"button btn ant-btn-primary\">\n                  Change Password\n                </button>\n              </div>\n            </div>\n          </form>\n        ) : (\n          <div>\n            {success !== '' ? (\n              <Result\n                status=\"success\"\n                title=\"Successfully changed your password\"\n                extra={\n                  <Link href=\"/\">\n                    <Button type=\"primary\">Back Home</Button>\n                  </Link>\n                }\n              />\n            ) : error !== '' ? (\n              <div className=\"alert alert-danger m-4\">{error}</div>\n            ) : (\n              <div className=\"alert alert-warning m-4\">Submitting. Please Wait</div>\n            )}\n          </div>\n        )}\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default ChangePassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}