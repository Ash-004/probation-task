{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Moment from 'moment';\nimport { extendMoment } from 'moment-range';\nimport Card from 'antd/lib/card';\n// antd components\nimport DatePicker from 'antd/lib/date-picker';\nimport Cookies from 'universal-cookie';\nimport dataFetch from '../../../utils/dataFetch';\nimport Statsdash from './Statsdash';\nimport Doughnut from './Doughnut';\nconst {\n  RangePicker\n} = DatePicker;\nconst moment = extendMoment(Moment);\nconst cookies = new Cookies();\nconst Overview2 = () => {\n  var now = new Date();\n  var daysOfYear = [];\n  for (var d = startDate; d <= now; d.setDate(d.getDate() + 1)) {\n    daysOfYear.push(new Date(d));\n    console.log(daysOfYear);\n  }\n  const usernamecookie = cookies.get('username');\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  const {\n    0: dailyLogData,\n    1: setDailyLogData\n  } = useState([]);\n  const {\n    0: startDate,\n    1: setStartDate\n  } = useState(new Date());\n  const {\n    0: endDate,\n    1: setEndDate\n  } = useState(new Date());\n  const {\n    0: pieData,\n    1: setPieData\n  } = useState([]);\n  var numberDays = 7;\n  const {\n    0: userName,\n    1: setUserName\n  } = useState([]);\n  const {\n    0: days,\n    1: setDays\n  } = useState(numberDays);\n  const {\n    0: given,\n    1: setGiven\n  } = useState(0);\n  const {\n    0: notGiven,\n    1: setNotGiven\n  } = useState(0);\n  const {\n    0: rangeLoaded,\n    1: setRangeLoaded\n  } = useState(false);\n  const {\n    0: isLoaded,\n    1: setLoaded\n  } = useState(false);\n  const query = `query($nDate: Date){\n  getStatusUpdates(date:$nDate) {\n    message\n    member{\n      username\n      lastStatusUpdate\n    }\n    date\n    timestamp\n  }\n}`;\n  const fetchData = async variables => dataFetch({\n    query,\n    variables\n  });\n  useEffect(() => {\n    if (!rangeLoaded) {\n      setStartDate(new Date(moment().subtract(1, 'weeks').format('YYYY-MM-DD')));\n      setRangeLoaded(true);\n      numberDays = 7;\n    }\n\n    // console.log(moment(endDate).diff(moment(startDate), 'days'));\n    if (!isLoaded && rangeLoaded) {\n      const variables = {\n        startDate: moment(startDate).format('YYYY-MM-DD'),\n        endDate: moment(endDate).format('YYYY-MM-DD')\n      };\n      fetchData(variables).then(r => {\n        // setUserName(r.data.getStatusUpdate.memberStats.usernamecookie);\n        // r.data.getStatusUpdate.memberStats.map((item)=> {\n        console.log(r.data.getStatusUpdates.slice(-1)[0].member.username);\n        console.log(r.data.getStatusUpdates[0].member.username);\n      });\n\n      //\n      // setData(r.data.clubStatusUpdate.memberStats);\n      // setDailyLogData(r.data.clubStatusUpdate.dailyLog);\n      // setLoaded(true);\n      // });\n    }\n  });\n\n  const handleRangeChange = obj => {\n    if (obj[0] != null && obj[1] != null) {\n      setStartDate(moment(obj[0]));\n      setEndDate(moment(obj[1]));\n      setLoaded(false);\n      numberDays = moment(endDate).diff(moment(startDate), 'days');\n    }\n    // console.log(numberDays);\n  };\n\n  return __jsx(\"div\", {\n    className: \"p-4\"\n  }, __jsx(\"div\", {\n    className: \"mx-2\"\n  }, __jsx(\"div\", {\n    className: \"row m-0\"\n  }, __jsx(\"div\", {\n    className: \"col text-right\"\n  }, __jsx(RangePicker, {\n    defaultValue: [moment(new Date(), 'YYYY-MM-DD').subtract(1, 'weeks'), moment(new Date(), 'YYYY-MM-DD')]\n    // onChange={handleRangeChange}\n  })))), __jsx(\"div\", {\n    className: \"row m-0\"\n  }, __jsx(\"div\", {\n    className: \"col-md-7 p-2\"\n  }, __jsx(Card, {\n    style: {\n      boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'\n    }\n  }, __jsx(\"div\", {\n    class: \"flex-container\",\n    style: {\n      display: 'flex',\n      flexBasis: 0\n    }\n  }, __jsx(\"div\", {\n    class: \"flex-child yellow\",\n    style: {\n      flex: 1,\n      textAlign: 'center'\n    }\n  }, __jsx(\"h3\", null, days), __jsx(\"h7\", null, \"Total number of days\")), __jsx(\"div\", {\n    class: \"flex-child red\",\n    style: {\n      flex: 1,\n      textAlign: 'center'\n    }\n  }, __jsx(\"h3\", null, given), __jsx(\"h7\", null, \"Updates given\")), __jsx(\"div\", {\n    class: \"flex-child blue\",\n    style: {\n      flex: 1,\n      textAlign: 'center'\n    }\n  }, __jsx(\"h3\", null, notGiven), __jsx(\"h7\", null, \"Updates missed\")))), __jsx(Card, {\n    style: {\n      boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)',\n      marginTop: '20px'\n    }\n  }, __jsx(\"div\", null, __jsx(\"p\", null, \"Number of times updated first:1\")), __jsx(\"div\", null, __jsx(\"p\", null, \"Number of times updated last:\\uD83D\\uDC0C\")), __jsx(\"div\", null, __jsx(\"p\", null, \"Number of times got kicked:\\u2620\")))), __jsx(\"div\", {\n    className: \"col-md-5 p-2\"\n  }, __jsx(Card, {\n    style: {\n      backgroundColor: '#FFFFFF',\n      boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'\n    }\n  })), __jsx(\"div\", {\n    className: \"col-md-12 p-2\"\n  }, __jsx(Card, {\n    style: {\n      backgroundColor: '#FFFFFF',\n      boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'\n    }\n  }))));\n};\nexport default Overview2;","map":{"version":3,"names":["React","useEffect","useState","Moment","extendMoment","Card","DatePicker","Cookies","dataFetch","Statsdash","Doughnut","RangePicker","moment","cookies","Overview2","now","Date","daysOfYear","d","startDate","setDate","getDate","push","console","log","usernamecookie","get","data","setData","dailyLogData","setDailyLogData","setStartDate","endDate","setEndDate","pieData","setPieData","numberDays","userName","setUserName","days","setDays","given","setGiven","notGiven","setNotGiven","rangeLoaded","setRangeLoaded","isLoaded","setLoaded","query","fetchData","variables","subtract","format","then","r","getStatusUpdates","slice","member","username","handleRangeChange","obj","diff","__jsx","className","defaultValue","style","boxShadow","class","display","flexBasis","flex","textAlign","marginTop","backgroundColor"],"sources":["/home/ash/react projects/amFOSS-webapp/modules/statusUpdates/components/Overview2.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Moment from 'moment';\nimport { extendMoment } from 'moment-range';\nimport Card from 'antd/lib/card';\n// antd components\nimport DatePicker from 'antd/lib/date-picker';\nimport Cookies from 'universal-cookie';\n\nimport dataFetch from '../../../utils/dataFetch';\nimport Statsdash from './Statsdash';\nimport Doughnut from './Doughnut';\n\nconst { RangePicker } = DatePicker;\nconst moment = extendMoment(Moment);\nconst cookies = new Cookies();\n\nconst Overview2 = () => {\n  var now = new Date();\n  var daysOfYear = [];\n  for (var d = startDate; d <= now; d.setDate(d.getDate() + 1)) {\n    daysOfYear.push(new Date(d));\n    console.log(daysOfYear)\n  }\n  const usernamecookie=cookies.get('username');\n  const [data, setData] = useState([]);\n  const [dailyLogData, setDailyLogData] = useState([]);\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(new Date());\n  const [pieData, setPieData] = useState([]);\n  var numberDays=7;\n\n  const [userName,setUserName] = useState([]);\n  const [days,setDays] = useState(numberDays);\n  const [given,setGiven] = useState(0);\n  const [notGiven,setNotGiven] = useState(0);\n\n  const [rangeLoaded, setRangeLoaded] = useState(false);\n  const [isLoaded, setLoaded] = useState(false);\n\n  const query = `query($nDate: Date){\n  getStatusUpdates(date:$nDate) {\n    message\n    member{\n      username\n      lastStatusUpdate\n    }\n    date\n    timestamp\n  }\n}`;\n\n\n  const fetchData = async (variables) => dataFetch({ query, variables });\n\n  useEffect(() => {\n    if (!rangeLoaded) {\n      setStartDate(new Date(moment().subtract(1, 'weeks').format('YYYY-MM-DD')));\n      setRangeLoaded(true);\n      numberDays=7;\n    }\n\n      // console.log(moment(endDate).diff(moment(startDate), 'days'));\n    if (!isLoaded && rangeLoaded) {\n      const variables = {\n        startDate: moment(startDate).format('YYYY-MM-DD'),\n        endDate: moment(endDate).format('YYYY-MM-DD'),\n      };\n\n\n      fetchData(variables).then((r) => {\n\n        // setUserName(r.data.getStatusUpdate.memberStats.usernamecookie);\n        // r.data.getStatusUpdate.memberStats.map((item)=> {\n        console.log(r.data.getStatusUpdates.slice(-1)[0].member.username)\n        console.log(r.data.getStatusUpdates[0].member.username)\n\n      });\n\n        \n\n        //\n        // setData(r.data.clubStatusUpdate.memberStats);\n        // setDailyLogData(r.data.clubStatusUpdate.dailyLog);\n        // setLoaded(true);\n      // });\n    }\n  });\n\n  \n\n  const handleRangeChange = (obj) => {\n    if (obj[0] != null && obj[1] != null) {\n      setStartDate(moment(obj[0]));\n      setEndDate(moment(obj[1]));\n      setLoaded(false);\n      numberDays=moment(endDate).diff(moment(startDate), 'days');\n\n    }\n    // console.log(numberDays);\n\n  };\n\n\n  return (\n    <div className=\"p-4\">\n      <div className=\"mx-2\">\n        <div className=\"row m-0\">\n          <div className=\"col text-right\">\n            <RangePicker\n              defaultValue={[\n                moment(new Date(), 'YYYY-MM-DD').subtract(1, 'weeks'),\n                moment(new Date(), 'YYYY-MM-DD'),\n              ]}\n              // onChange={handleRangeChange}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"row m-0\">   \n        <div className=\"col-md-7 p-2\">\n             <Card style={{ boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'}}>\n                      <div class=\"flex-container\"\n                           style={{ display:'flex', flexBasis: 0 }}>\n                          <div class=\"flex-child yellow\"\n                             style={{ flex:1, textAlign:'center'}}>\n                              <h3>{days}</h3>\n                              <h7>Total number of days</h7>\n                          </div>\n                          <div class=\"flex-child red\"\n                             style={{ flex:1, textAlign:'center'}}>\n                              <h3>{given}</h3>\n                              <h7>Updates given</h7>\n                          </div>\n                          <div class=\"flex-child blue\"\n                             style={{ flex:1, textAlign:'center'}}>\n                              <h3>{notGiven}</h3>\n                              <h7>Updates missed</h7>\n                          </div>\n                      </div>\n            </Card>\n            <Card style={{ boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)', marginTop: '20px'}}>\n              <div><p>Number of times updated first:1</p></div>\n              <div><p>Number of times updated last:🐌</p></div>\n              <div><p>Number of times got kicked:☠</p></div>\n            </Card>\n        </div>\n        <div className=\"col-md-5 p-2\">\n             <Card style={{backgroundColor: '#FFFFFF', boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'}}>\n                           {/*<Doughnut pdata={pieData}/>*/}\n             </Card>\n        </div>\n        <div className=\"col-md-12 p-2\">\n               <Card style={{backgroundColor: '#FFFFFF', boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'}}>\n                  {/*<Statsdash data={data} isLoaded={true} />*/}\n                </Card>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Overview2;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}