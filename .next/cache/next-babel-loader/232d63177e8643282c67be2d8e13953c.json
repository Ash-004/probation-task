{"ast":null,"code":"var _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Moment from 'moment';\nimport { extendMoment } from 'moment-range';\nimport Card from 'antd/lib/card';\n// antd components\nimport DatePicker from 'antd/lib/date-picker';\nimport Cookies from 'universal-cookie';\nimport dataFetch from '../../../utils/dataFetch';\nimport Statsdash from './Statsdash';\nimport Doughnut from './Doughnut';\nvar RangePicker = DatePicker.RangePicker;\nvar moment = extendMoment(Moment);\nvar cookies = new Cookies();\nvar Overview2 = function Overview2() {\n  _s();\n  var usernamecookie = cookies.get('username');\n  var _useState = useState([]),\n    data = _useState[0],\n    setData = _useState[1];\n  var _useState2 = useState([]),\n    dailyLogData = _useState2[0],\n    setDailyLogData = _useState2[1];\n  var _useState3 = useState(new Date()),\n    startDate = _useState3[0],\n    setStartDate = _useState3[1];\n  var _useState4 = useState(new Date()),\n    endDate = _useState4[0],\n    setEndDate = _useState4[1];\n  var _useState5 = useState([]),\n    pieData = _useState5[0],\n    setPieData = _useState5[1];\n  var numberDays = 7;\n  var _useState6 = useState([]),\n    userName = _useState6[0],\n    setUserName = _useState6[1];\n  var _useState7 = useState(numberDays),\n    days = _useState7[0],\n    setDays = _useState7[1];\n  var _useState8 = useState(0),\n    given = _useState8[0],\n    setGiven = _useState8[1];\n  var _useState9 = useState(0),\n    notGiven = _useState9[0],\n    setNotGiven = _useState9[1];\n  var _useState10 = useState(false),\n    rangeLoaded = _useState10[0],\n    setRangeLoaded = _useState10[1];\n  var _useState11 = useState(false),\n    isLoaded = _useState11[0],\n    setLoaded = _useState11[1];\n  var query = \"query($endDate: Date){\\n  getStatusUpdates(date:$endDate) {\\n    message\\n    member{\\n      username\\n      lastStatusUpdate\\n    }\\n    date\\n    timestamp\\n  }\\n}\";\n  useEffect(function () {\n    if (!rangeLoaded) {\n      setStartDate(new Date(moment().subtract(1, 'weeks').format('YYYY-MM-DD')));\n      setRangeLoaded(true);\n      numberDays = 7;\n    }\n    if (!isLoaded && rangeLoaded) {\n      var variables = {\n        endDate: moment(endDate).format('YYYY-MM-DD')\n      };\n      fetchData(variables).then(function (r) {\n        console.log(r.data.getStatusUpdates.slice(-1)[0].member.username);\n        console.log(r.data.getStatusUpdates[0].member.username);\n\n        // Update the state with the fetched data\n        setData(r.data.clubStatusUpdate.memberStats);\n        setDailyLogData(r.data.clubStatusUpdate.dailyLog);\n        setLoaded(true);\n      });\n    }\n  }, [endDate]);\n\n  //\n  // setData(r.data.clubStatusUpdate.memberStats);\n  // setDailyLogData(r.data.clubStatusUpdate.dailyLog);\n  setLoaded(true);\n  // });\n\n  var handleRangeChange = function handleRangeChange(obj) {\n    if (obj[0] != null && obj[1] != null) {\n      setStartDate(moment(obj[0]));\n      setEndDate(moment(obj[1]));\n      setLoaded(false);\n      numberDays = moment(endDate).diff(moment(startDate), 'days');\n    }\n    // console.log(numberDays);\n  };\n\n  return __jsx(\"div\", {\n    className: \"p-4\"\n  }, __jsx(\"div\", {\n    className: \"mx-2\"\n  }, __jsx(\"div\", {\n    className: \"row m-0\"\n  }, __jsx(\"div\", {\n    className: \"col text-right\"\n  }, __jsx(RangePicker, {\n    defaultValue: [moment(new Date(), 'YYYY-MM-DD').subtract(1, 'weeks'), moment(new Date(), 'YYYY-MM-DD')]\n    // onChange={handleRangeChange}\n  })))), __jsx(\"div\", {\n    className: \"row m-0\"\n  }, __jsx(\"div\", {\n    className: \"col-md-7 p-2\"\n  }, __jsx(Card, {\n    style: {\n      boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'\n    }\n  }, __jsx(\"div\", {\n    \"class\": \"flex-container\",\n    style: {\n      display: 'flex',\n      flexBasis: 0\n    }\n  }, __jsx(\"div\", {\n    \"class\": \"flex-child yellow\",\n    style: {\n      flex: 1,\n      textAlign: 'center'\n    }\n  }, __jsx(\"h3\", null, days), __jsx(\"h7\", null, \"Total number of days\")), __jsx(\"div\", {\n    \"class\": \"flex-child red\",\n    style: {\n      flex: 1,\n      textAlign: 'center'\n    }\n  }, __jsx(\"h3\", null, given), __jsx(\"h7\", null, \"Updates given\")), __jsx(\"div\", {\n    \"class\": \"flex-child blue\",\n    style: {\n      flex: 1,\n      textAlign: 'center'\n    }\n  }, __jsx(\"h3\", null, notGiven), __jsx(\"h7\", null, \"Updates missed\")))), __jsx(Card, {\n    style: {\n      boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)',\n      marginTop: '20px'\n    }\n  }, __jsx(\"div\", null, __jsx(\"p\", null, \"Number of times updated first:1\")), __jsx(\"div\", null, __jsx(\"p\", null, \"Number of times updated last:\\uD83D\\uDC0C\")), __jsx(\"div\", null, __jsx(\"p\", null, \"Number of times got kicked:\\u2620\")))), __jsx(\"div\", {\n    className: \"col-md-5 p-2\"\n  }, __jsx(Card, {\n    style: {\n      backgroundColor: '#FFFFFF',\n      boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'\n    }\n  })), __jsx(\"div\", {\n    className: \"col-md-12 p-2\"\n  }, __jsx(Card, {\n    style: {\n      backgroundColor: '#FFFFFF',\n      boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'\n    }\n  }))));\n};\n_s(Overview2, \"U0FWRyOQj3D548WeU0nJvD4KPEw=\");\n_c = Overview2;\nexport default Overview2;\nvar _c;\n$RefreshReg$(_c, \"Overview2\");","map":{"version":3,"names":["React","useEffect","useState","Moment","extendMoment","Card","DatePicker","Cookies","dataFetch","Statsdash","Doughnut","RangePicker","moment","cookies","Overview2","_s","usernamecookie","get","_useState","data","setData","_useState2","dailyLogData","setDailyLogData","_useState3","Date","startDate","setStartDate","_useState4","endDate","setEndDate","_useState5","pieData","setPieData","numberDays","_useState6","userName","setUserName","_useState7","days","setDays","_useState8","given","setGiven","_useState9","notGiven","setNotGiven","_useState10","rangeLoaded","setRangeLoaded","_useState11","isLoaded","setLoaded","query","subtract","format","variables","fetchData","then","r","console","log","getStatusUpdates","slice","member","username","clubStatusUpdate","memberStats","dailyLog","handleRangeChange","obj","diff","__jsx","className","defaultValue","style","boxShadow","display","flexBasis","flex","textAlign","marginTop","backgroundColor","_c","$RefreshReg$"],"sources":["/home/ash/react projects/amFOSS-webapp/modules/statusUpdates/components/Overview2.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Moment from 'moment';\nimport { extendMoment } from 'moment-range';\nimport Card from 'antd/lib/card';\n// antd components\nimport DatePicker from 'antd/lib/date-picker';\nimport Cookies from 'universal-cookie';\n\nimport dataFetch from '../../../utils/dataFetch';\nimport Statsdash from './Statsdash';\nimport Doughnut from './Doughnut';\n\nconst { RangePicker } = DatePicker;\nconst moment = extendMoment(Moment);\nconst cookies = new Cookies();\n\nconst Overview2 = () => {\n\n  const usernamecookie=cookies.get('username');\n  const [data, setData] = useState([]);\n  const [dailyLogData, setDailyLogData] = useState([]);\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(new Date());\n  const [pieData, setPieData] = useState([]);\n  var numberDays=7;\n\n  const [userName,setUserName] = useState([]);\n  const [days,setDays] = useState(numberDays);\n  const [given,setGiven] = useState(0);\n  const [notGiven,setNotGiven] = useState(0);\n\n  const [rangeLoaded, setRangeLoaded] = useState(false);\n  const [isLoaded, setLoaded] = useState(false);\n\n  const query = `query($endDate: Date){\n  getStatusUpdates(date:$endDate) {\n    message\n    member{\n      username\n      lastStatusUpdate\n    }\n    date\n    timestamp\n  }\n}`;\n\n\n  useEffect(() => {\n    if (!rangeLoaded) {\n      setStartDate(new Date(moment().subtract(1, 'weeks').format('YYYY-MM-DD')));\n      setRangeLoaded(true);\n      numberDays=7;\n    }\n\n    if (!isLoaded && rangeLoaded) {\n      const variables = {\n        endDate: moment(endDate).format('YYYY-MM-DD'),\n      };\n\n      fetchData(variables).then((r) => {\n        console.log(r.data.getStatusUpdates.slice(-1)[0].member.username);\n        console.log(r.data.getStatusUpdates[0].member.username);\n\n        // Update the state with the fetched data\n        setData(r.data.clubStatusUpdate.memberStats);\n        setDailyLogData(r.data.clubStatusUpdate.dailyLog);\n        setLoaded(true);\n      });\n    }\n  }, [endDate]);\n\n\n\n        //\n        // setData(r.data.clubStatusUpdate.memberStats);\n        // setDailyLogData(r.data.clubStatusUpdate.dailyLog);\n        setLoaded(true);\n      // });\n\n\n  \n\n  const handleRangeChange = (obj) => {\n    if (obj[0] != null && obj[1] != null) {\n      setStartDate(moment(obj[0]));\n      setEndDate(moment(obj[1]));\n      setLoaded(false);\n      numberDays=moment(endDate).diff(moment(startDate), 'days');\n\n    }\n    // console.log(numberDays);\n\n  };\n\n\n  return (\n    <div className=\"p-4\">\n      <div className=\"mx-2\">\n        <div className=\"row m-0\">\n          <div className=\"col text-right\">\n            <RangePicker\n              defaultValue={[\n                moment(new Date(), 'YYYY-MM-DD').subtract(1, 'weeks'),\n                moment(new Date(), 'YYYY-MM-DD'),\n              ]}\n              // onChange={handleRangeChange}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"row m-0\">   \n        <div className=\"col-md-7 p-2\">\n             <Card style={{ boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'}}>\n                      <div class=\"flex-container\"\n                           style={{ display:'flex', flexBasis: 0 }}>\n                          <div class=\"flex-child yellow\"\n                             style={{ flex:1, textAlign:'center'}}>\n                              <h3>{days}</h3>\n                              <h7>Total number of days</h7>\n                          </div>\n                          <div class=\"flex-child red\"\n                             style={{ flex:1, textAlign:'center'}}>\n                              <h3>{given}</h3>\n                              <h7>Updates given</h7>\n                          </div>\n                          <div class=\"flex-child blue\"\n                             style={{ flex:1, textAlign:'center'}}>\n                              <h3>{notGiven}</h3>\n                              <h7>Updates missed</h7>\n                          </div>\n                      </div>\n            </Card>\n            <Card style={{ boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)', marginTop: '20px'}}>\n              <div><p>Number of times updated first:1</p></div>\n              <div><p>Number of times updated last:🐌</p></div>\n              <div><p>Number of times got kicked:☠</p></div>\n            </Card>\n        </div>\n        <div className=\"col-md-5 p-2\">\n             <Card style={{backgroundColor: '#FFFFFF', boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'}}>\n                           {/*<Doughnut pdata={pieData}/>*/}\n             </Card>\n        </div>\n        <div className=\"col-md-12 p-2\">\n               <Card style={{backgroundColor: '#FFFFFF', boxShadow: '10px 10px 5px rgba(0, 0, 0, 0.25)'}}>\n                  {/*<Statsdash data={data} isLoaded={true} />*/}\n                </Card>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Overview2;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}